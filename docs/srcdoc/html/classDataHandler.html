<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>OWL-PHP: DataHandler Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul>
</div>
<h1>DataHandler Class Reference<br>
<small>
[<a class="el" href="group__OWL__SO__LAYER.html">Storage Object modules</a>]</small>
</h1><!-- doxytag: class="DataHandler" --><!-- doxytag: inherits="_OWL" -->The <a class="el" href="classOWL.html">OWL</a> Data object.  
<a href="#_details">More...</a>
<p>
<div class="dynheader">
Inheritance diagram for DataHandler:</div>
<div class="dynsection">
<p><center><img src="classDataHandler__inherit__graph.png" border="0" usemap="#DataHandler__inherit__map" alt="Inheritance graph"></center>
<map name="DataHandler__inherit__map">
<area shape="rect" href="classFormHandler.html" title="Formhandler." alt="" coords="5,541,147,659"><area shape="rect" href="class__OWL.html" title="{_OWL\n|&#45; $status\l&#45; $pstatus\l&#45; $severity\l|+ __destruct()\l# init()\l# reset()\l&#45; reset_calltree()\l}" alt="" coords="12,5,140,173"></map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center></div>
<div class="dynheader">
Collaboration diagram for DataHandler:</div>
<div class="dynsection">
<p><center><img src="classDataHandler__coll__graph.png" border="0" usemap="#DataHandler__coll__map" alt="Collaboration graph"></center>
<map name="DataHandler__coll__map">
<area shape="rect" href="class__OWL.html" title="{_OWL\n|&#45; $status\l&#45; $pstatus\l&#45; $severity\l|+ __destruct()\l# init()\l# reset()\l&#45; reset_calltree()\l}" alt="" coords="8,6,136,174"></map>
<center><font size="2">[<a target="top" href="graph_legend.html">legend</a>]</font></center></div>

<p>
<a href="classDataHandler-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#4eef16167dd9a5bc94bd0cb40ce1b180">__construct</a> ($dblink=null, $tablename= '')</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#b89e1aaad9cd0a37f1c7f13c1d9c0d57">reset</a> ($level=<a class="el" href="class_8datahandler_8php.html#19a99423705b41e563424ae76d7fe184">DATA_RESET_PREPARE</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#16c81c9564a7feaf530ce5d51ed99df7">__set</a> ($variable, $value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#32ce223478b78a4ea9838a3c6ac7440c">set_key</a> ($variable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#f58cbd10b032e4904fa15ce950d521e2">__get</a> ($variable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#9b77733f02e9d6281fc40df110c0ba70">set_join</a> ($lvalue, $rvalue, $linktype= '=')</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__OWL.html#e0ef3ded56e8a6b34b6461e5a721cd3e">init</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class__OWL.html#2f2a042bcf31965194c03033df0edc9b">reset</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#1e4789e22370c96ae479bc3a58f30984">find_field</a> ($fld, &amp;$expanded)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#329b5524c379e0db6c4d5ce59f3c414f">$owl_data</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#da9b697f81ea82d269077f9c7445791d">$owl_joins</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#8d398720bce975159b2d13ad7a941bc7">$owl_keys</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#24620784bde262bdd02227962d3b9605">$owl_tablename</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#3ac49aa018e0ebe4c74f5a636d455a8b">$owl_database</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classDataHandler.html#e6093d21291ed3ab3183e11962452928">$owl_prepared</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The <a class="el" href="classOWL.html">OWL</a> Data object. 
<p>
This class contains DB datasets <dl class="author" compact><dt><b>Author:</b></dt><dd>Oscar van Eijk, Oveas Functionality Provider </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>Aug 4, 2008 -- O van Eijk -- initial version </dd></dl>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="4eef16167dd9a5bc94bd0cb40ce1b180"></a><!-- doxytag: member="DataHandler::__construct" ref="4eef16167dd9a5bc94bd0cb40ce1b180" args="($dblink=null, $tablename= '')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::__construct           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>dblink</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>tablename</em> = <code>''</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Class constructor <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$dblink</em>&nbsp;</td><td>Database object </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$tablename</em>&nbsp;</td><td>Default table name for this dataset </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b89e1aaad9cd0a37f1c7f13c1d9c0d57"></a><!-- doxytag: member="DataHandler::reset" ref="b89e1aaad9cd0a37f1c7f13c1d9c0d57" args="($level=DATA_RESET_PREPARE)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::reset           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>level</em> = <code><a class="el" href="class_8datahandler_8php.html#19a99423705b41e563424ae76d7fe184">DATA_RESET_PREPARE</a></code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Reset the object <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$level</em>&nbsp;</td><td>The reset level, can be any of the following:<ul>
<li>DATA_RESET_STATUS; Reset object status only</li><li>DATA_RESET_PREPARE (default); Reset status and a prepared query</li><li>DATA_RESET_META; Reset status and query, remove all locks and joins</li><li>DATA_RESET_FULL; Reset status and query, remove all locks, joins and data </li></ul>
</td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="16c81c9564a7feaf530ce5d51ed99df7"></a><!-- doxytag: member="DataHandler::__set" ref="16c81c9564a7feaf530ce5d51ed99df7" args="($variable, $value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::__set           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>variable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Define or override a variable in the data array<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$variable</em>&nbsp;</td><td>The name of the variable that should be set </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$value</em>&nbsp;</td><td>Value to set the variable to. If this is an array, the second field in the array has to be the tablename where the fieldname is found. The value itself van NEVER be an array! </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="32ce223478b78a4ea9838a3c6ac7440c"></a><!-- doxytag: member="DataHandler::set_key" ref="32ce223478b78a4ea9838a3c6ac7440c" args="($variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::set_key           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Lock variables for update by adding them to an array. Fields in this array will not be overwritten on updates, but used in WHERE clauses. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$variable</em>&nbsp;</td><td>Variable name to lock, optionally as an array (table, field) </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Severity level </dd></dl>

</div>
</div><p>
<a class="anchor" name="1e4789e22370c96ae479bc3a58f30984"></a><!-- doxytag: member="DataHandler::find_field" ref="1e4789e22370c96ae479bc3a58f30984" args="($fld, &amp;$expanded)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::find_field           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>fld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>expanded</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Try to exand a field to a fully qualified 'table#field' name<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$fld</em>&nbsp;</td><td>The fieldname that has to be expanded </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>$expanded</em>&nbsp;</td><td>An array with all matching fully qualified fieldnames. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The number of matches </dd></dl>

</div>
</div><p>
<a class="anchor" name="f58cbd10b032e4904fa15ce950d521e2"></a><!-- doxytag: member="DataHandler::__get" ref="f58cbd10b032e4904fa15ce950d521e2" args="($variable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::__get           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>variable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Retrieve a value from the data array. The variable name can be a fully qualified table/fieldname (format "table#field"), or only a field name, in which case it has to be unique. If the fieldname cannot be found directly, the array is scanned to find a matching field. It more matches are found, the object status is set to DATA_AMBFIELD.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$variable</em>&nbsp;</td><td>The name of the variable that should be retrieved </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The value, or NULL when the value was not found or abigious. </dd></dl>

<p>Reimplemented in <a class="el" href="classFormHandler.html#371b8ded5110c6d66bc3a0c3e08fe085">FormHandler</a>.</p>

</div>
</div><p>
<a class="anchor" name="9b77733f02e9d6281fc40df110c0ba70"></a><!-- doxytag: member="DataHandler::set_join" ref="9b77733f02e9d6281fc40df110c0ba70" args="($lvalue, $rvalue, $linktype= '=')" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::set_join           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>lvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>rvalue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>linktype</em> = <code>'='</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Define a link between 2 fields that will be recognized when the database query is built.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$lvalue</em>&nbsp;</td><td>Left value as array(table, field) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$rvalue</em>&nbsp;</td><td>Right value as array(table, field) </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>$linktype</em>&nbsp;</td><td>How are the fields linked. Can be any binary operator as recognized by SQL. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Severity level </dd></dl>

</div>
</div><p>
<a class="anchor" name="e0ef3ded56e8a6b34b6461e5a721cd3e"></a><!-- doxytag: member="DataHandler::init" ref="e0ef3ded56e8a6b34b6461e5a721cd3e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_OWL::init           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function should be called by all constuctors. It initializes the general characteristics. Status is 'warning' by default, it's up to the contructor to set a proper status; if it's still 'warning', this *might* indicate something went wrong. 
</div>
</div><p>
<a class="anchor" name="2f2a042bcf31965194c03033df0edc9b"></a><!-- doxytag: member="DataHandler::reset" ref="2f2a042bcf31965194c03033df0edc9b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_OWL::reset           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [protected, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
General reset function for all objects. Should be called after each non-fatal error 
<p>Reimplemented in <a class="el" href="classDbHandler.html#9982df4830f05803935bb31bac7fae3d">DbHandler</a>.</p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="329b5524c379e0db6c4d5ce59f3c414f"></a><!-- doxytag: member="DataHandler::$owl_data" ref="329b5524c379e0db6c4d5ce59f3c414f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::$owl_data<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Indexed array holding all data values. 
</div>
</div><p>
<a class="anchor" name="da9b697f81ea82d269077f9c7445791d"></a><!-- doxytag: member="DataHandler::$owl_joins" ref="da9b697f81ea82d269077f9c7445791d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::$owl_joins<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
2D Array holding all relationships between the data. 
</div>
</div><p>
<a class="anchor" name="8d398720bce975159b2d13ad7a941bc7"></a><!-- doxytag: member="DataHandler::$owl_keys" ref="8d398720bce975159b2d13ad7a941bc7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::$owl_keys<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Array with variable names that are used in WHERE clauses on updates 
</div>
</div><p>
<a class="anchor" name="24620784bde262bdd02227962d3b9605"></a><!-- doxytag: member="DataHandler::$owl_tablename" ref="24620784bde262bdd02227962d3b9605" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::$owl_tablename<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
All variable names are expected to be fields in a database as well. If a table name is not given, the default table name will be used. This is useful for datasets that come from only one database table. For datasets that are not read from or written to a database, the tablename can be null. 
</div>
</div><p>
<a class="anchor" name="3ac49aa018e0ebe4c74f5a636d455a8b"></a><!-- doxytag: member="DataHandler::$owl_database" ref="3ac49aa018e0ebe4c74f5a636d455a8b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::$owl_database<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
An optional link to a database object. This has to be specified if the data needs to be written to or read from a dabatase. 
</div>
</div><p>
<a class="anchor" name="e6093d21291ed3ab3183e11962452928"></a><!-- doxytag: member="DataHandler::$owl_prepared" ref="e6093d21291ed3ab3183e11962452928" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">DataHandler::$owl_prepared<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Boolean that indicates of a query has been prepared 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>/home/oscar/work/eclipse/owl-php/src/kernel/so/<a class="el" href="class_8datahandler_8php.html">class.datahandler.php</a></ul>
<hr size="1"><address style="text-align: right;"><small>Generated on Mon Sep 8 14:26:32 2008 for OWL-PHP by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
