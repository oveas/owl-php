\section{DbHandler Class Reference}
\label{classDbHandler}\index{DbHandler@{DbHandler}}


Database handler.  


Inheritance diagram for DbHandler:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classDbHandler}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf \_\-\_\-destruct} ()
\item 
{\bf \_\-\_\-clone} ()
\item 
{\bf alt} (array \$properties)
\item 
{\bf forceReread} ()
\item 
{\bf create} ()
\item 
{\bf isOpen} ()
\item 
{\bf open} ()
\item 
{\bf reset} ()
\item 
{\bf tablename} (\$tablename, \$ignore\_\-backticks=false)
\item 
{\bf setQuery} (\$qry)
\item 
{\bf prepareField} (array \$fielddata)
\item 
{\bf startTransaction} (\$name)
\item 
{\bf commitTransaction} (\$name, \$openNew=false)
\item 
{\bf rollbackTransaction} (\$name, \$openNew=false)
\item 
{\bf read} (\$flag={\bf DBHANDLE\_\-DATA}, \&\$data, \$quick\_\-query= '', \$line=0, \$file= '[unknown]')
\item 
{\bf tableExists} (\$tablename)
\item 
{\bf escapeString} (\$string)
\item 
{\bf unescapeString} (\$string)
\item 
{\bf prepareRead} (array \$values=array(), array \$tables=array(), array \$searches=array(), array \$joins=array())
\item 
{\bf prepareDelete} (array \$searches=array())
\item 
{\bf prepareUpdate} (array \$values=array(), array \$searches=array(), array \$joins=array())
\item 
{\bf prepareInsert} (array \$values=array())
\item 
{\bf write} (\&\$rows=null, \$line=0, \$file= '[unknown]')
\item 
{\bf lastInsertedId} (\$table=null, \$field=null)
\item 
{\bf close} ()
\item 
{\bf getStatus} ()
\item 
{\bf getSeverity} (\$status=null)
\item 
{\bf succeeded} (\$\_\-ok={\bf OWL\_\-SUCCESS}, \&\$\_\-object=null)
\item 
{\bf signal} (\$level={\bf OWL\_\-INFO}, \&\$text=false)
\item 
{\bf traceback} (\&\$text=false, \$depth=0)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static {\bf getInstance} ()
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf init} ()
\item 
{\bf setCallback} (\$\_\-dispatcher)
\item 
{\bf setCallbackArgument} (array \$\_\-arg)
\item 
{\bf getCallback} ()
\item 
{\bf saveStatus} ()
\item 
{\bf restoreStatus} ()
\item 
{\bf check} (\&\$object, \$level={\bf OWL\_\-WARNING})
\item 
{\bf setStatus} (\$status, \$params=array())
\item 
{\bf setHighSeverity} (\&\$object=null)
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf \$severity}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf \_\-\_\-construct} (\$srv= 'localhost', \$db= '', \$usr= '', \$pwd= '', \$dbtype= '{\bf MySQL}')
\item 
{\bf loadDriver} ()
\item 
{\bf connect} ()
\item 
{\bf dbread} (\$qry, \&\$rows, \&\$fields)
\item 
{\bf expandField} (\&\$field, \$check\_\-name=false)
\item 
{\bf tablelist} (array \$tables)
\item 
{\bf whereClause} (array \$searches, array \$joins)
\item 
{\bf updateList} (array \$updates)
\item 
{\bf extractTablelist} (array \$fields)
\item 
{\bf additionalClauses} ()
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf \$id}
\item 
{\bf \$errno}
\item 
{\bf \$error}
\item 
{\bf \$database}
\item 
{\bf \$driver}
\item 
{\bf \$use\_\-backticks}
\item 
{\bf \$rowcount}
\item 
{\bf \$opened}
\item 
{\bf \$db\_\-prefix}
\item 
{\bf \$query}
\item 
{\bf \$ordering}
\item 
{\bf \$grouping}
\item 
{\bf \$having}
\item 
{\bf \$limit}
\item 
{\bf \$query\_\-type}
\item 
{\bf \$transaction}
\item 
{\bf \$cloned}
\end{DoxyCompactItemize}
\subsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static {\bf \$instance}
\item 
static {\bf \$original\_\-instance}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Database handler. 

Handler for all database I/O. This singleton class uses an (abstract) class for the actual storage. This class should not be called directly; it is implemented by class \doxyref{DataHandler}{p.}{classDataHandler} \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
May 15, 2007 -\/-\/ O van Eijk -\/-\/ initial version for Terra-\/Terra 

Jul 29, 2008 -\/-\/ O van Eijk -\/-\/ Modified version for \doxyref{OWL}{p.}{classOWL} 
\end{DoxyVersion}


\subsection{Constructor \& Destructor Documentation}
\index{DbHandler@{DbHandler}!\_\-\_\-construct@{\_\-\_\-construct}}
\index{\_\-\_\-construct@{\_\-\_\-construct}!DbHandler@{DbHandler}}
\subsubsection[{\_\-\_\-construct}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\_\-\_\-construct (
\begin{DoxyParamCaption}
\item[{\$}]{srv = {\ttfamily 'localhost'}, }
\item[{\$}]{db = {\ttfamily ''}, }
\item[{\$}]{usr = {\ttfamily ''}, }
\item[{\$}]{pwd = {\ttfamily ''}, }
\item[{\$}]{dbtype = {\ttfamily '{\bf MySQL}'}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_ae54e9d4643f41a9296167086f6a769fc}
Class constructor; opens the database connection.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$srv} & Database server \\
\hline
\mbox{\tt in}  & {\em \$db} & Database name \\
\hline
\mbox{\tt in}  & {\em \$usr} & Username to connect with \\
\hline
\mbox{\tt in}  & {\em \$pwd} & Password to use for connection \\
\hline
\mbox{\tt in}  & {\em \$dbtype} & Database type, used to load the driver \\
\hline
\end{DoxyParams}


References ConfigHandler::get(), \_\-OWL::init(), loadDriver(), and \_\-OWL::setStatus().

\index{DbHandler@{DbHandler}!\_\-\_\-destruct@{\_\-\_\-destruct}}
\index{\_\-\_\-destruct@{\_\-\_\-destruct}!DbHandler@{DbHandler}}
\subsubsection[{\_\-\_\-destruct}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\_\-\_\-destruct (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDbHandler_a7cd6bd727d1f296eb5dbfae6ca36ab3f}
Class destructor; closes the database connection 

Reimplemented from {\bf \_\-OWL} \doxyref{}{p.}{class__OWL_a44fd2222476a3109286cc82d92b6bbcc}.



References close().



\subsection{Member Function Documentation}
\index{DbHandler@{DbHandler}!\_\-\_\-clone@{\_\-\_\-clone}}
\index{\_\-\_\-clone@{\_\-\_\-clone}!DbHandler@{DbHandler}}
\subsubsection[{\_\-\_\-clone}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\_\-\_\-clone (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDbHandler_ada20e62b915bc87a1de28389a2ee81e1}
Implementation of the \doxyref{\_\-\_\-clone()}{p.}{classDbHandler_ada20e62b915bc87a1de28389a2ee81e1} function. The current connection will be closed, and a property will be set to indicate this is a cloned object. After that, the \doxyref{alt()}{p.}{classDbHandler_ac3a8e0bfe2491e17bc527715505f90a7} method can be used to change connection info. 

References \$instance, close(), reset(), and \_\-OWL::setStatus().

\index{DbHandler@{DbHandler}!additionalClauses@{additionalClauses}}
\index{additionalClauses@{additionalClauses}!DbHandler@{DbHandler}}
\subsubsection[{additionalClauses}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::additionalClauses (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a9380a7c5c11003d51addd9ea02d41f89}
Check if additional clauses (like GROUP BY, ORDER BY etc) have been defined, and compose this depending on the query type. \begin{DoxyReturn}{Returns}
String with additional clauses 
\end{DoxyReturn}


References expandField().



Referenced by prepareDelete(), prepareInsert(), prepareRead(), and prepareUpdate().

\index{DbHandler@{DbHandler}!alt@{alt}}
\index{alt@{alt}!DbHandler@{DbHandler}}
\subsubsection[{alt}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::alt (
\begin{DoxyParamCaption}
\item[{array \$}]{properties}
\end{DoxyParamCaption}
)}\label{classDbHandler_ac3a8e0bfe2491e17bc527715505f90a7}
On a cloned database object, set an alternative, prefix or connection. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$properties} & An indexed array with the properties that should be changed. Supported are:
\begin{DoxyItemize}
\item prefix : The table prefix
\item server : Database server
\item name : Database name
\item username : Username to connect with
\item password : Password to use for connection
\item dbdriver : Database type (reserved for future use, currently only \doxyref{MySQL}{p.}{classMySQL} is implemented) 
\end{DoxyItemize}\\
\hline
\end{DoxyParams}


References loadDriver(), open(), and \_\-OWL::setStatus().

\index{DbHandler@{DbHandler}!check@{check}}
\index{check@{check}!DbHandler@{DbHandler}}
\subsubsection[{check}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::check (
\begin{DoxyParamCaption}
\item[{\&\$}]{object, }
\item[{\$}]{level = {\ttfamily {\bf OWL\_\-WARNING}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_ae2e3c56e5f3c4ce4156c6b1bb1c50f63}
This is a helper function for lazy developers. Some checks have to be made quite often, this is a kinda macro to handle that. It compares the own severity level with that of a given object. If the highest level is above a given max, a traceback and reset are performed.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$object} & Pointer to an object to check against \\
\hline
\mbox{\tt in}  & {\em \$level} & The maximum severity level \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the severity level was correct (below the max), otherwise false 
\end{DoxyReturn}


References \_\-OWL::reset(), \_\-OWL::setHighSeverity(), and \_\-OWL::traceback().



Referenced by SessionHandler::write().

\index{DbHandler@{DbHandler}!close@{close}}
\index{close@{close}!DbHandler@{DbHandler}}
\subsubsection[{close}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::close (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDbHandler_ad3d2853bbd2d1962710907e34afb424f}
Close the database and disconnect from the server. This function is called on program shutdown. Although the database will be closed already by PHP, this function might be called at any time manually; is also updates the 'opened' variable. 

Referenced by \_\-\_\-clone(), \_\-\_\-destruct(), create(), and forceReread().

\index{DbHandler@{DbHandler}!commitTransaction@{commitTransaction}}
\index{commitTransaction@{commitTransaction}!DbHandler@{DbHandler}}
\subsubsection[{commitTransaction}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::commitTransaction (
\begin{DoxyParamCaption}
\item[{\$}]{name, }
\item[{\$}]{openNew = {\ttfamily false}}
\end{DoxyParamCaption}
)}\label{classDbHandler_ae31ec569a60f730fb1de2ac2b1265338}
Commit database transaction 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$name} & Transaction name (reserverd for future use) \\
\hline
\mbox{\tt in}  & {\em \$openNew} & Boolean set to true when a new transaction must be opened immediately \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Object severity status 
\end{DoxyReturn}


References \_\-OWL::\$severity, and \_\-OWL::setStatus().

\index{DbHandler@{DbHandler}!connect@{connect}}
\index{connect@{connect}!DbHandler@{DbHandler}}
\subsubsection[{connect}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::connect (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a9cf52ba614981a0082063d57290d3b7c}
Connect to the database server

\begin{DoxyReturn}{Returns}
True on success, otherwise False 
\end{DoxyReturn}


References ConfigHandler::get(), and \_\-OWL::setStatus().



Referenced by create(), and open().

\index{DbHandler@{DbHandler}!create@{create}}
\index{create@{create}!DbHandler@{DbHandler}}
\subsubsection[{create}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::create (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDbHandler_ac9e93cb0ab57f03b2719eebd0c0ee2ef}
Create a new database

\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}


References close(), connect(), and \_\-OWL::setStatus().

\index{DbHandler@{DbHandler}!dbread@{dbread}}
\index{dbread@{dbread}!DbHandler@{DbHandler}}
\subsubsection[{dbread}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::dbread (
\begin{DoxyParamCaption}
\item[{\$}]{qry, }
\item[{\&\$}]{rows, }
\item[{\&\$}]{fields}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a130e49aa639fecb46ce6719ddcb0d72f}
Read from the database.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$qry} & Database query string. \\
\hline
\mbox{\tt out}  & {\em \$rows} & Number of rows matched \\
\hline
\mbox{\tt out}  & {\em \$fields} & Number of fields per row \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A 2D array with all data, or false on failures 
\end{DoxyReturn}


Referenced by read().

\index{DbHandler@{DbHandler}!escapeString@{escapeString}}
\index{escapeString@{escapeString}!DbHandler@{DbHandler}}
\subsubsection[{escapeString}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::escapeString (
\begin{DoxyParamCaption}
\item[{\$}]{string}
\end{DoxyParamCaption}
)}\label{classDbHandler_a84d876a07a292f4a7bd49e5acfac9d14}
Call the current DBtype's escape function for character strings.


\begin{DoxyParams}{Parameters}
{\em \$string} & The string that should be escaped \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The escaped string 
\end{DoxyReturn}
\index{DbHandler@{DbHandler}!expandField@{expandField}}
\index{expandField@{expandField}!DbHandler@{DbHandler}}
\subsubsection[{expandField}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::expandField (
\begin{DoxyParamCaption}
\item[{\&\$}]{field, }
\item[{\$}]{check\_\-name = {\ttfamily false}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_ad8dac71adf4d540270b5b2c87da114a8}
Change a fieldname in the format 'table\#field' to the format '`[prefix]table.field`' The fieldname can have additional \#-\/seperated elements, which contain the method from the database driver and its arguments (that will be passed as an array) 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in,out}  & {\em \$field} & Fieldname to expand \\
\hline
\mbox{\tt in}  & {\em \$check\_\-name} & Boolean which is true if the fieldname should be returned with 'AS'. Default is false \\
\hline
\end{DoxyParams}


References tablename().



Referenced by additionalClauses(), prepareInsert(), prepareRead(), updateList(), and whereClause().

\index{DbHandler@{DbHandler}!extractTablelist@{extractTablelist}}
\index{extractTablelist@{extractTablelist}!DbHandler@{DbHandler}}
\subsubsection[{extractTablelist}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::extractTablelist (
\begin{DoxyParamCaption}
\item[{array \$}]{fields}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_ab900537e8f8170436f2be39e2a9026cf}
Create an array with unique tablenames as extracted from an array of fields in the format (table::field =$>$ value, ...) 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$fields} & An array with fields \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Array with tablenames 
\end{DoxyReturn}


References \$\_\-table.



Referenced by prepareDelete(), prepareInsert(), and prepareUpdate().

\index{DbHandler@{DbHandler}!forceReread@{forceReread}}
\index{forceReread@{forceReread}!DbHandler@{DbHandler}}
\subsubsection[{forceReread}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::forceReread (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDbHandler_a1a342f747e4e4c10c00d7d6066d50d59}
Hmmm.... we need this method as the result of a race condition; if an alternative database (clone) is opened first, that's the default connection, which is probably the case in most situation since the owl config table is read early in the init phase. I need to think about it... is this solution acceptable? So we need something smarter here? This method is allowed to be called only once by OWLLoader; maybe some checks? 

References close(), ConfigHandler::get(), loadDriver(), and open().

\index{DbHandler@{DbHandler}!getCallback@{getCallback}}
\index{getCallback@{getCallback}!DbHandler@{DbHandler}}
\subsubsection[{getCallback}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::getCallback (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_acb46ff88f43ca66f1268d3f5199c3f8d}
Retrieve a previously set (callback) dispatcher. The (callback) dispatcher is cleared immediatly. \begin{DoxyReturn}{Returns}
The dispatcher, of null on failure. 
\end{DoxyReturn}


Reimplemented in {\bf Dispatcher} \doxyref{}{p.}{classDispatcher_a31c4bd4e4eaee7ef90b1ea364a901447}.



References OWL::factory().

\index{DbHandler@{DbHandler}!getInstance@{getInstance}}
\index{getInstance@{getInstance}!DbHandler@{DbHandler}}
\subsubsection[{getInstance}]{\setlength{\rightskip}{0pt plus 5cm}static DbHandler::getInstance (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [static]}}\label{classDbHandler_a72b64ea1342d97d300d564a7641627d7}
Return a reference to my implementation. If necessary, create that implementation first.

\begin{DoxyReturn}{Returns}
Object instance ID 
\end{DoxyReturn}


References \$instance, \$original\_\-instance, and ConfigHandler::get().

\index{DbHandler@{DbHandler}!getSeverity@{getSeverity}}
\index{getSeverity@{getSeverity}!DbHandler@{DbHandler}}
\subsubsection[{getSeverity}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::getSeverity (
\begin{DoxyParamCaption}
\item[{\$}]{status = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inherited]}}\label{class__OWL_a2374613f9bb7eccf49a5dbc9a9ef4751}
Get the current object severity level.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$status} & An optional parameter to check an other status code i.s.o the object's current status. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status severity level 
\end{DoxyReturn}


References \_\-OWL::\$status.



Referenced by LogHandler::composeMessage(), LogHandler::log(), and DataHandler::setKey().

\index{DbHandler@{DbHandler}!getStatus@{getStatus}}
\index{getStatus@{getStatus}!DbHandler@{DbHandler}}
\subsubsection[{getStatus}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::getStatus (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [final, inherited]}}\label{class__OWL_ac1f1643ff5b5db7c326c30477603358d}
Get the current object status.

\begin{DoxyReturn}{Returns}
Object's status code 
\end{DoxyReturn}


Referenced by SchemeHandler::compare().

\index{DbHandler@{DbHandler}!init@{init}}
\index{init@{init}!DbHandler@{DbHandler}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_ae0ef3ded56e8a6b34b6461e5a721cd3e}
This function should be called by all constuctors. It initializes the general characteristics. Status is 'warning' by default, it's up to the contructor to set a proper status; if it's still 'warning', this $\ast$might$\ast$ indicate something went wrong. 

References OWL::factory(), and \_\-OWL::setStatus().



Referenced by FormFieldPlugin::\_\-\_\-construct(), Tablerow::\_\-\_\-construct(), Tablecell::\_\-\_\-construct(), Table::\_\-\_\-construct(), Document::\_\-\_\-construct(), ContainerPlugin::\_\-\_\-construct(), Container::\_\-\_\-construct(), SessionHandler::\_\-\_\-construct(), SchemeHandler::\_\-\_\-construct(), LogHandler::\_\-\_\-construct(), ImageHandler::\_\-\_\-construct(), FormHandler::\_\-\_\-construct(), FileHandler::\_\-\_\-construct(), \_\-\_\-construct(), DataHandler::\_\-\_\-construct(), OWL::\_\-\_\-construct(), Group::\_\-\_\-construct(), Form::\_\-\_\-construct(), Dispatcher::\_\-\_\-construct(), and User::construct().

\index{DbHandler@{DbHandler}!isOpen@{isOpen}}
\index{isOpen@{isOpen}!DbHandler@{DbHandler}}
\subsubsection[{isOpen}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::isOpen (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDbHandler_a71b713d7b974200e64bd606e3b099c38}
Let other objects check if th database connection is opened

\begin{DoxyReturn}{Returns}
boolean, True when opened 
\end{DoxyReturn}
\index{DbHandler@{DbHandler}!lastInsertedId@{lastInsertedId}}
\index{lastInsertedId@{lastInsertedId}!DbHandler@{DbHandler}}
\subsubsection[{lastInsertedId}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::lastInsertedId (
\begin{DoxyParamCaption}
\item[{\$}]{table = {\ttfamily null}, }
\item[{\$}]{field = {\ttfamily null}}
\end{DoxyParamCaption}
)}\label{classDbHandler_a8e1ac478bf6f4e2285d13141fd75bb9e}
Return the last ID after a newly inserted record holding an AUTO\_\-INCREMENT field 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$table} & \doxyref{Table}{p.}{classTable} name holding the auto increment field \\
\hline
\mbox{\tt in}  & {\em \$field} & Name of the auto increment field \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The number that was last inserted 
\end{DoxyReturn}
\index{DbHandler@{DbHandler}!loadDriver@{loadDriver}}
\index{loadDriver@{loadDriver}!DbHandler@{DbHandler}}
\subsubsection[{loadDriver}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::loadDriver (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_ab4db7c4fa445700b96a2d4b1be6e50a4}
Create a new instance of the database driver 

References OWLloader::getDriver(), and toStrictBoolean().



Referenced by \_\-\_\-construct(), alt(), and forceReread().

\index{DbHandler@{DbHandler}!open@{open}}
\index{open@{open}!DbHandler@{DbHandler}}
\subsubsection[{open}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::open (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDbHandler_afccbfc69ead84f8445116e050d1cfc2d}
Opens the database connection.

\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}


References connect(), and \_\-OWL::setStatus().



Referenced by alt(), forceReread(), and read().

\index{DbHandler@{DbHandler}!prepareDelete@{prepareDelete}}
\index{prepareDelete@{prepareDelete}!DbHandler@{DbHandler}}
\subsubsection[{prepareDelete}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::prepareDelete (
\begin{DoxyParamCaption}
\item[{array \$}]{searches = {\ttfamily array()}}
\end{DoxyParamCaption}
)}\label{classDbHandler_a4dce3c43b43a82a1ac0e3ba2c83309ee}
Prepare a delete query. Data is taken from the arrays that are passed to this function. All fieldnames are in the format 'table\#field', where the table is not yet prefixed.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$searches} & Given values that have to match \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}


References additionalClauses(), extractTablelist(), \_\-OWL::setStatus(), tablelist(), and whereClause().

\index{DbHandler@{DbHandler}!prepareField@{prepareField}}
\index{prepareField@{prepareField}!DbHandler@{DbHandler}}
\subsubsection[{prepareField}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::prepareField (
\begin{DoxyParamCaption}
\item[{array \$}]{fielddata}
\end{DoxyParamCaption}
)}\label{classDbHandler_aab87f0d23357d708c7f327e3875366ad}
Prepare a field for use in the upconimg query using the array as set by DbHandler::set(). Internal arrays are filled with grouping data, ordering data etc. if required., 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$fielddata} & Array with a description of the field, \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
DbHandler::set() 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
An array with two elements: the fieldname in the format that will be handled by \doxyref{DbHandler::expandField()}{p.}{classDbHandler_ad8dac71adf4d540270b5b2c87da114a8}, and the value which might be a normal value, an array of values of a value as set by a driver function (using database functions). On errors, null is returned. 
\end{DoxyReturn}


References \_\-OWL::setStatus().

\index{DbHandler@{DbHandler}!prepareInsert@{prepareInsert}}
\index{prepareInsert@{prepareInsert}!DbHandler@{DbHandler}}
\subsubsection[{prepareInsert}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::prepareInsert (
\begin{DoxyParamCaption}
\item[{array \$}]{values = {\ttfamily array()}}
\end{DoxyParamCaption}
)}\label{classDbHandler_a50f426084a888714b72bedb42de7ebc4}
Prepare an insert query. Data is taken from the arrays that are passed to this function. All fieldnames are in the format 'table\#field', where the table is not yet prefixed.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$values} & Given database values \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}


References additionalClauses(), expandField(), extractTablelist(), \_\-OWL::setStatus(), and tablename().

\index{DbHandler@{DbHandler}!prepareRead@{prepareRead}}
\index{prepareRead@{prepareRead}!DbHandler@{DbHandler}}
\subsubsection[{prepareRead}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::prepareRead (
\begin{DoxyParamCaption}
\item[{array \$}]{values = {\ttfamily array()}, }
\item[{array \$}]{tables = {\ttfamily array()}, }
\item[{array \$}]{searches = {\ttfamily array()}, }
\item[{array \$}]{joins = {\ttfamily array()}}
\end{DoxyParamCaption}
)}\label{classDbHandler_a2f749a426fa9dbfe1b58a7d0d4263d1f}
Prepare a read query. Data is taken from the arrays that are passed to this function. All fieldnames are in the format 'table\#field', where the table is not yet prefixed.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$values} & Values that will be read \\
\hline
\mbox{\tt in}  & {\em \$tables} & Tables from which will be read \\
\hline
\mbox{\tt in}  & {\em \$searches} & Given values that have to match \\
\hline
\mbox{\tt in}  & {\em \$joins} & Joins on the given tables \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}


References additionalClauses(), expandField(), \_\-OWL::setStatus(), tablelist(), and whereClause().

\index{DbHandler@{DbHandler}!prepareUpdate@{prepareUpdate}}
\index{prepareUpdate@{prepareUpdate}!DbHandler@{DbHandler}}
\subsubsection[{prepareUpdate}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::prepareUpdate (
\begin{DoxyParamCaption}
\item[{array \$}]{values = {\ttfamily array()}, }
\item[{array \$}]{searches = {\ttfamily array()}, }
\item[{array \$}]{joins = {\ttfamily array()}}
\end{DoxyParamCaption}
)}\label{classDbHandler_abe6db4c3099ca5cfcfb75e9eb34ba2af}
Prepare an update query. Data is taken from the arrays that are passed to this function. All fieldnames are in the format 'table\#field', where the table is not yet prefixed.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$values} & Given database values \\
\hline
\mbox{\tt in}  & {\em \$searches} & List of fieldnames that will be used in the where clause. All fields not in this array will be updated! \\
\hline
\mbox{\tt in}  & {\em \$joins} & Joins on the given tables \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}


References additionalClauses(), extractTablelist(), \_\-OWL::setStatus(), tablelist(), updateList(), and whereClause().

\index{DbHandler@{DbHandler}!read@{read}}
\index{read@{read}!DbHandler@{DbHandler}}
\subsubsection[{read}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::read (
\begin{DoxyParamCaption}
\item[{\$}]{flag = {\ttfamily {\bf DBHANDLE\_\-DATA}}, }
\item[{\&\$}]{data, }
\item[{\$}]{quick\_\-query = {\ttfamily ''}, }
\item[{\$}]{line = {\ttfamily 0}, }
\item[{\$}]{file = {\ttfamily '[unknown]'}}
\end{DoxyParamCaption}
)}\label{classDbHandler_a5ebfdc2acfcb0e9cbc2861fc55c7127c}
Read from the database. The return value depends on the flag. By default, the selected rows(s) are returned in a 2d array.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$flag} & Flag that identifies how data should be returned; as data (default) or the number of rows \\
\hline
\mbox{\tt out}  & {\em \$data} & The retrieved value in a format depending on the flag:
\begin{DoxyItemize}
\item DBHANDLE\_\-ROWCOUNT; Number of matching rows
\item DBHANDLE\_\-FIELDCOUNT; Number of fields per rows
\item DBHANDLE\_\-TOTALFIELDCOUNT; Total number op fields
\item DBHANDLE\_\-DATA (default); A 2D array with all data
\item DBHANDLE\_\-SINGLEROW; The first matching row in a 1D array
\item DBHANDLE\_\-SINGLEFIELD; The first matching field 
\end{DoxyItemize}\\
\hline
\mbox{\tt in}  & {\em \$quick\_\-query} & Database query string. If empty, \$this-\/$>$query is used \\
\hline
\mbox{\tt in}  & {\em \$line} & Line number of this call \\
\hline
\mbox{\tt in}  & {\em \$file} & File that made the call to this method \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}


References dbread(), open(), and \_\-OWL::setStatus().

\index{DbHandler@{DbHandler}!reset@{reset}}
\index{reset@{reset}!DbHandler@{DbHandler}}
\subsubsection[{reset}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::reset (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classDbHandler_a9982df4830f05803935bb31bac7fae3d}
Reset the object 

Reimplemented from {\bf \_\-OWL} \doxyref{}{p.}{class__OWL_a2f2a042bcf31965194c03033df0edc9b}.



Referenced by \_\-\_\-clone().

\index{DbHandler@{DbHandler}!restoreStatus@{restoreStatus}}
\index{restoreStatus@{restoreStatus}!DbHandler@{DbHandler}}
\subsubsection[{restoreStatus}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::restoreStatus (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_a93de01a9bbbc3f228e1a62a0740e90f0}
Restore the previously saved status object and destroy the copy 

References \_\-OWL::setStatus().



Referenced by User::logout().

\index{DbHandler@{DbHandler}!rollbackTransaction@{rollbackTransaction}}
\index{rollbackTransaction@{rollbackTransaction}!DbHandler@{DbHandler}}
\subsubsection[{rollbackTransaction}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::rollbackTransaction (
\begin{DoxyParamCaption}
\item[{\$}]{name, }
\item[{\$}]{openNew = {\ttfamily false}}
\end{DoxyParamCaption}
)}\label{classDbHandler_ad62c686d350ee350849ea42687492a48}
Rollback the current transaction 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$name} & Transaction name (reserverd for future use) \\
\hline
\mbox{\tt in}  & {\em \$openNew} & Boolean set to true when a new transaction must be opened immediately \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Object severity status 
\end{DoxyReturn}


References \_\-OWL::\$severity, and \_\-OWL::setStatus().

\index{DbHandler@{DbHandler}!saveStatus@{saveStatus}}
\index{saveStatus@{saveStatus}!DbHandler@{DbHandler}}
\subsubsection[{saveStatus}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::saveStatus (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_add923dc756471318edca8883db3f4420}
Create a copy of the status object 

Referenced by User::logout().

\index{DbHandler@{DbHandler}!setCallback@{setCallback}}
\index{setCallback@{setCallback}!DbHandler@{DbHandler}}
\subsubsection[{setCallback}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::setCallback (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-dispatcher}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_a5f84d43cd4dc7810649f1e2ebecad360}
Set a dispatcher for later callback 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-dispatcher} & Dispatched, \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\doxyref{Dispatcher::composeDispatcher()}{p.}{classDispatcher_a8a974bbbb30be7cda74f9929972fd2f6} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
True on success, false on failure 
\end{DoxyReturn}


References OWL::factory().

\index{DbHandler@{DbHandler}!setCallbackArgument@{setCallbackArgument}}
\index{setCallbackArgument@{setCallbackArgument}!DbHandler@{DbHandler}}
\subsubsection[{setCallbackArgument}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::setCallbackArgument (
\begin{DoxyParamCaption}
\item[{array \$}]{\_\-arg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_a4e9ebfbd3c0d76539bed4e44de9962c3}
Add an argument to a previously registered callback dispatcher 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-arg} & Argument, must be an array type. When non-\/ arrays should be passed as arguments, the must be set when the callback is registered already \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success, false on failure 
\end{DoxyReturn}


References OWL::factory().



Referenced by User::register().

\index{DbHandler@{DbHandler}!setHighSeverity@{setHighSeverity}}
\index{setHighSeverity@{setHighSeverity}!DbHandler@{DbHandler}}
\subsubsection[{setHighSeverity}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::setHighSeverity (
\begin{DoxyParamCaption}
\item[{\&\$}]{object = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_a97173dbe452428d3851406413264734d}
Compare the severity level of the current object with a given one and set my statuspointer to the object with the highest level. 

Referenced by \_\-OWL::check(), DataHandler::db(), DataHandler::prepare(), and SessionHandler::read().

\index{DbHandler@{DbHandler}!setQuery@{setQuery}}
\index{setQuery@{setQuery}!DbHandler@{DbHandler}}
\subsubsection[{setQuery}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::setQuery (
\begin{DoxyParamCaption}
\item[{\$}]{qry}
\end{DoxyParamCaption}
)}\label{classDbHandler_a14787a81542efc8dea40060532e5ddca}
Set the database query. This function should only be used if the query is too complex to be set with any of the prepare() functions.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$qry} & A complete database query. All tablenames must be prefixed (with the \doxyref{tablename()}{p.}{classDbHandler_a05ea485a22c0ef87090f2313614c84c8} function)! \\
\hline
\end{DoxyParams}
\index{DbHandler@{DbHandler}!setStatus@{setStatus}}
\index{setStatus@{setStatus}!DbHandler@{DbHandler}}
\subsubsection[{setStatus}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::setStatus (
\begin{DoxyParamCaption}
\item[{\$}]{status, }
\item[{\$}]{params = {\ttfamily array~()}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [final, protected, inherited]}}\label{class__OWL_a80e2fe01c3663dbb0ab685eebe33fd1e}
Set the current object status to the specified value.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$status} & \doxyref{OWL}{p.}{classOWL} status code \\
\hline
\mbox{\tt in}  & {\em \$params} & \\
\hline
\end{DoxyParams}


References \$GLOBALS, \_\-OWL::\$status, ConfigHandler::get(), Register::getCode(), \_\-OWL::reset(), and \_\-OWL::signal().



Referenced by \_\-\_\-clone(), Container::\_\-\_\-construct(), SchemeHandler::\_\-\_\-construct(), ImageHandler::\_\-\_\-construct(), FormHandler::\_\-\_\-construct(), FileHandler::\_\-\_\-construct(), \_\-\_\-construct(), DataHandler::\_\-\_\-construct(), Session::\_\-\_\-construct(), BaseElement::\_\-getContent(), Form::addField(), FormFieldRadioPlugin::addOption(), BaseElement::addToContent(), alt(), SchemeHandler::alterScheme(), FileHandler::close(), commitTransaction(), Dispatcher::composeDispatcher(), User::confirm(), connect(), create(), SchemeHandler::createScheme(), SchemeHandler::defineIndex(), SchemeHandler::defineScheme(), Dispatcher::dispatch(), FormHandler::get(), DataHandler::get(), SchemeHandler::getTableColumns(), SchemeHandler::getTableIndexes(), \_\-OWL::init(), Document::loadScript(), Document::loadStyle(), User::login(), FileHandler::open(), open(), LogHandler::openLogfile(), DataHandler::prepare(), prepareDelete(), prepareField(), prepareInsert(), prepareRead(), prepareUpdate(), read(), FileHandler::readLine(), User::readUserdata(), User::register(), Dispatcher::registerArgument(), Dispatcher::registerCallback(), \_\-OWL::restoreStatus(), rollbackTransaction(), SchemeHandler::scheme(), FormHandler::set(), BaseElement::setAttributes(), BaseElement::setContent(), Form::setEncoding(), Document::setFavicon(), Form::setFieldAttributes(), DataHandler::setJoin(), DataHandler::setKey(), FormFieldTextPlugin::setMaxsize(), Document::setMeta(), Form::setMethod(), FormFieldRadioPlugin::setSelected(), FormFieldTextPlugin::setSize(), FormFieldSelectPlugin::setSize(), FormFieldSelectPlugin::setValue(), Form::showField(), startTransaction(), SchemeHandler::tableDescription(), SchemeHandler::validateScheme(), and write().

\index{DbHandler@{DbHandler}!signal@{signal}}
\index{signal@{signal}!DbHandler@{DbHandler}}
\subsubsection[{signal}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::signal (
\begin{DoxyParamCaption}
\item[{\$}]{level = {\ttfamily {\bf OWL\_\-INFO}}, }
\item[{\&\$}]{text = {\ttfamily false}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inherited]}}\label{class__OWL_a51ba4a16409acf2a2f61f286939091a5}
Display the message for the current object status


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$level} & An optional severity level; message will only be displayed when it is at least of this level. \\
\hline
\mbox{\tt out}  & {\em \$text} & If this parameter is given, the message text is returned in this string instead of echood. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The severity level for this object 
\end{DoxyReturn}


References ConfigHandler::get().



Referenced by \_\-OWL::setStatus(), and \_\-OWL::traceback().

\index{DbHandler@{DbHandler}!startTransaction@{startTransaction}}
\index{startTransaction@{startTransaction}!DbHandler@{DbHandler}}
\subsubsection[{startTransaction}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::startTransaction (
\begin{DoxyParamCaption}
\item[{\$}]{name}
\end{DoxyParamCaption}
)}\label{classDbHandler_a19f0cb54f362ab3f919cfc2b940800c0}
Start a new database transaction 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$name} & Transaction name (reserverd for future use) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Object severity status 
\end{DoxyReturn}


References \_\-OWL::\$severity, and \_\-OWL::setStatus().

\index{DbHandler@{DbHandler}!succeeded@{succeeded}}
\index{succeeded@{succeeded}!DbHandler@{DbHandler}}
\subsubsection[{succeeded}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::succeeded (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-ok = {\ttfamily {\bf OWL\_\-SUCCESS}}, }
\item[{\&\$}]{\_\-object = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inherited]}}\label{class__OWL_a53ab4d3bbb2c6a56966c339ca4b4c805}
Check if the object currenlty has a success state 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-ok} & The highest severity that's considered successfull, default OWL\_\-SUCCESS \\
\hline
\mbox{\tt in}  & {\em \$\_\-object} & REference to the object to check, defaults to the current object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Boolean true when successfull 
\end{DoxyReturn}


Referenced by User::construct(), Dispatcher::registerArgument(), and Dispatcher::registerCallback().

\index{DbHandler@{DbHandler}!tableExists@{tableExists}}
\index{tableExists@{tableExists}!DbHandler@{DbHandler}}
\subsubsection[{tableExists}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::tableExists (
\begin{DoxyParamCaption}
\item[{\$}]{tablename}
\end{DoxyParamCaption}
)}\label{classDbHandler_a139d99b594ab5b95da378d7b281ae8a0}
Check if a table exists in the database 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$tablename} & Name of the table to check \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True of the table exists 
\end{DoxyReturn}


References tablename().

\index{DbHandler@{DbHandler}!tablelist@{tablelist}}
\index{tablelist@{tablelist}!DbHandler@{DbHandler}}
\subsubsection[{tablelist}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::tablelist (
\begin{DoxyParamCaption}
\item[{array \$}]{tables}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a0ea7d40a222cf6f1bf77b42e8eba03e4}
Create a list with tables, including prefixes, that can be interpreted by SQL


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$tables} & An array with tablenames \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The tablelist 
\end{DoxyReturn}


References \$\_\-table, and tablename().



Referenced by prepareDelete(), prepareRead(), and prepareUpdate().

\index{DbHandler@{DbHandler}!tablename@{tablename}}
\index{tablename@{tablename}!DbHandler@{DbHandler}}
\subsubsection[{tablename}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::tablename (
\begin{DoxyParamCaption}
\item[{\$}]{tablename, }
\item[{\$}]{ignore\_\-backticks = {\ttfamily false}}
\end{DoxyParamCaption}
)}\label{classDbHandler_a05ea485a22c0ef87090f2313614c84c8}
Extend a tablename with the database prefix


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$tablename} & \doxyref{Table}{p.}{classTable} name to extend \\
\hline
\mbox{\tt in}  & {\em \$ignore\_\-backticks} & Boolean to suppress backticks if set, default false \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Extended table name 
\end{DoxyReturn}


Referenced by expandField(), prepareInsert(), tableExists(), and tablelist().

\index{DbHandler@{DbHandler}!traceback@{traceback}}
\index{traceback@{traceback}!DbHandler@{DbHandler}}
\subsubsection[{traceback}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::traceback (
\begin{DoxyParamCaption}
\item[{\&\$}]{text = {\ttfamily false}, }
\item[{\$}]{depth = {\ttfamily 0}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inherited]}}\label{class__OWL_aa29547995d6741b7d2b90c1d4ea99a13}
If somehwere in the nested calls an error occured, we can traceback the original failing object with this function and signal the message.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em \$text} & Optional variable in which the message text can be stored. If not given, the text will be written to standard output \\
\hline
\mbox{\tt in}  & {\em \$depth} & This paramater should be initially empty. It calculates the depth in recursive calls. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity code of the failing object 
\end{DoxyReturn}


References \_\-OWL::signal().



Referenced by \_\-OWL::check(), User::login(), and SessionHandler::read().

\index{DbHandler@{DbHandler}!unescapeString@{unescapeString}}
\index{unescapeString@{unescapeString}!DbHandler@{DbHandler}}
\subsubsection[{unescapeString}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::unescapeString (
\begin{DoxyParamCaption}
\item[{\$}]{string}
\end{DoxyParamCaption}
)}\label{classDbHandler_a03b7dab122b64aa5653dffb3e7150271}
Call the current DBtype's unescape function for character strings.


\begin{DoxyParams}{Parameters}
{\em \$string} & The string that should be unescaped \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The unescaped string 
\end{DoxyReturn}
\index{DbHandler@{DbHandler}!updateList@{updateList}}
\index{updateList@{updateList}!DbHandler@{DbHandler}}
\subsubsection[{updateList}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::updateList (
\begin{DoxyParamCaption}
\item[{array \$}]{updates}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a1340ca63d23565b97218846e77272410}
Create a string with 'field = value, ...' combinations in SQL format


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$updates} & Array with fields to update (fieldname =$>$ values) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The UPDATE statement 
\end{DoxyReturn}


References expandField().



Referenced by prepareUpdate().

\index{DbHandler@{DbHandler}!whereClause@{whereClause}}
\index{whereClause@{whereClause}!DbHandler@{DbHandler}}
\subsubsection[{whereClause}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::whereClause (
\begin{DoxyParamCaption}
\item[{array \$}]{searches, }
\item[{array \$}]{joins}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a4458733bab22e5487f700f7107a4e091}
Create a WHERE clause that can be interpreted by SQL


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$searches} & Array with values (fieldname =$>$ values) Values can be an array in which case more ORs for that field will be added to the where clause \\
\hline
\mbox{\tt in}  & {\em \$joins} & Array of arrays with values (field, linktype, field) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The WHERE clause 
\end{DoxyReturn}


References expandField().



Referenced by prepareDelete(), prepareRead(), and prepareUpdate().

\index{DbHandler@{DbHandler}!write@{write}}
\index{write@{write}!DbHandler@{DbHandler}}
\subsubsection[{write}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::write (
\begin{DoxyParamCaption}
\item[{\&\$}]{rows = {\ttfamily null}, }
\item[{\$}]{line = {\ttfamily 0}, }
\item[{\$}]{file = {\ttfamily '[unknown]'}}
\end{DoxyParamCaption}
)}\label{classDbHandler_ac02a117c76d5d20ec950fcd5aae9cf8d}
Database inserts and updates. The number of affected rows is stored in \$this-\/$>$rowcount


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em \$rows} & (optional) The number of affected rows \\
\hline
\mbox{\tt in}  & {\em \$line} & Line number of this call \\
\hline
\mbox{\tt in}  & {\em \$file} & File that made the call to this method \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}


References \_\-OWL::setStatus().



\subsection{Member Data Documentation}
\index{DbHandler@{DbHandler}!\$cloned@{\$cloned}}
\index{\$cloned@{\$cloned}!DbHandler@{DbHandler}}
\subsubsection[{\$cloned}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$cloned\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a6fc74f6785f349ab442f33ce31f46e63}
boolean -\/ true when the object has been cloned \index{DbHandler@{DbHandler}!\$database@{\$database}}
\index{\$database@{\$database}!DbHandler@{DbHandler}}
\subsubsection[{\$database}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$database\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_afaac5248f9ee59786b48a7b51f318940}
array -\/ Database location and authorization indo \index{DbHandler@{DbHandler}!\$db\_\-prefix@{\$db\_\-prefix}}
\index{\$db\_\-prefix@{\$db\_\-prefix}!DbHandler@{DbHandler}}
\subsubsection[{\$db\_\-prefix}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$db\_\-prefix\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a19af96598e7f72673fc5da26ad77731b}
string -\/ database prefix \index{DbHandler@{DbHandler}!\$driver@{\$driver}}
\index{\$driver@{\$driver}!DbHandler@{DbHandler}}
\subsubsection[{\$driver}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$driver\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a7fa6c2e54682982813e963fd738d1a1b}
object -\/ The database driver \index{DbHandler@{DbHandler}!\$errno@{\$errno}}
\index{\$errno@{\$errno}!DbHandler@{DbHandler}}
\subsubsection[{\$errno}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$errno\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_af6e9f493be56617cb533763bb2a0e85a}
integer -\/ Error ID \index{DbHandler@{DbHandler}!\$error@{\$error}}
\index{\$error@{\$error}!DbHandler@{DbHandler}}
\subsubsection[{\$error}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$error\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_ade79e11156abbfc180864beb5b9df377}
string -\/ Error text \index{DbHandler@{DbHandler}!\$grouping@{\$grouping}}
\index{\$grouping@{\$grouping}!DbHandler@{DbHandler}}
\subsubsection[{\$grouping}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$grouping\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a8491f7d8d0e7c1d87ba40eb084bee17c}
array -\/ list of fields for a GROUP BY clause \index{DbHandler@{DbHandler}!\$having@{\$having}}
\index{\$having@{\$having}!DbHandler@{DbHandler}}
\subsubsection[{\$having}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$having\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_aa547d4ff326eafb6b128820f4284ede4}
array -\/ list of fields for a HAVING clause \index{DbHandler@{DbHandler}!\$id@{\$id}}
\index{\$id@{\$id}!DbHandler@{DbHandler}}
\subsubsection[{\$id}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$id\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_ad38e1c3312815c8ad4093957881092ff}
integer -\/ DB Handle ID \index{DbHandler@{DbHandler}!\$instance@{\$instance}}
\index{\$instance@{\$instance}!DbHandler@{DbHandler}}
\subsubsection[{\$instance}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$instance\hspace{0.3cm}{\ttfamily  [static, private]}}\label{classDbHandler_a0859a862eac3e8ba14c6d04de0396710}
integer -\/ self reference 

Referenced by \_\-\_\-clone(), and getInstance().

\index{DbHandler@{DbHandler}!\$limit@{\$limit}}
\index{\$limit@{\$limit}!DbHandler@{DbHandler}}
\subsubsection[{\$limit}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$limit\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a3a05faa4d14c6c5117ed8b70fc37d778}
array with 2 elements to limit the query \begin{Desc}
\item[{\bf Todo}]this ain't implemented yet \end{Desc}
\index{DbHandler@{DbHandler}!\$opened@{\$opened}}
\index{\$opened@{\$opened}!DbHandler@{DbHandler}}
\subsubsection[{\$opened}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$opened\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a71e36ffbff0d157b1d91dc000bc6f821}
boolean -\/ True if the database is opened \index{DbHandler@{DbHandler}!\$ordering@{\$ordering}}
\index{\$ordering@{\$ordering}!DbHandler@{DbHandler}}
\subsubsection[{\$ordering}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$ordering\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a385a4c0af492f9c5db699d0b854cf88c}
array -\/ list of fields for an ORDER BY clasue \index{DbHandler@{DbHandler}!\$original\_\-instance@{\$original\_\-instance}}
\index{\$original\_\-instance@{\$original\_\-instance}!DbHandler@{DbHandler}}
\subsubsection[{\$original\_\-instance}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$original\_\-instance\hspace{0.3cm}{\ttfamily  [static, private]}}\label{classDbHandler_a495ca4030e7ca7d5e8c7e2604e042dfe}
integer -\/ self reference to the original object before cloning 

Referenced by getInstance().

\index{DbHandler@{DbHandler}!\$query@{\$query}}
\index{\$query@{\$query}!DbHandler@{DbHandler}}
\subsubsection[{\$query}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$query\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_ad671b5596b37dac6d48a660a07775965}
string -\/ Query string \index{DbHandler@{DbHandler}!\$query\_\-type@{\$query\_\-type}}
\index{\$query\_\-type@{\$query\_\-type}!DbHandler@{DbHandler}}
\subsubsection[{\$query\_\-type}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$query\_\-type\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_afba491ae1a1f1b9343cb65c87ef1e2a9}
string -\/ Prepared query type \index{DbHandler@{DbHandler}!\$rowcount@{\$rowcount}}
\index{\$rowcount@{\$rowcount}!DbHandler@{DbHandler}}
\subsubsection[{\$rowcount}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$rowcount\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a56a7ae4bd7d842c85f3fe8052aecbfef}
integer -\/ Row counter \index{DbHandler@{DbHandler}!\$severity@{\$severity}}
\index{\$severity@{\$severity}!DbHandler@{DbHandler}}
\subsubsection[{\$severity}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::\$severity\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_ad26b40a9dbbacb33e299b17826f8327c}
Severity level of the current object status 

Referenced by commitTransaction(), rollbackTransaction(), and startTransaction().

\index{DbHandler@{DbHandler}!\$transaction@{\$transaction}}
\index{\$transaction@{\$transaction}!DbHandler@{DbHandler}}
\subsubsection[{\$transaction}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$transaction\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_a4b95a0aa4fbae5d63d6f960984a276af}
string -\/ name of the open transaction (currently just used as a boolean) \index{DbHandler@{DbHandler}!\$use\_\-backticks@{\$use\_\-backticks}}
\index{\$use\_\-backticks@{\$use\_\-backticks}!DbHandler@{DbHandler}}
\subsubsection[{\$use\_\-backticks}]{\setlength{\rightskip}{0pt plus 5cm}DbHandler::\$use\_\-backticks\hspace{0.3cm}{\ttfamily  [private]}}\label{classDbHandler_aba13a0ae78c5665670778ed51be722d3}
boolean -\/ true when Backticks should be used in the queries, this can be defined in the driver using the constant USE\_\-BACKTICKS. Default is false 

The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
/home/oscar/projects/owl-\/php/src/kernel/so/{\bf class.dbhandler.php}\end{DoxyCompactItemize}
