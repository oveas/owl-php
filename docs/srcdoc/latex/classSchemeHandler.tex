\section{SchemeHandler Class Reference}
\label{classSchemeHandler}\index{SchemeHandler@{SchemeHandler}}


Scheme handler.  


Inheritance diagram for SchemeHandler:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classSchemeHandler}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf \_\-\_\-destruct} ()
\item 
{\bf \_\-\_\-clone} ()
\item 
{\bf createScheme} (\$\_\-tblname)
\item 
{\bf defineScheme} (\$\_\-scheme)
\item 
{\bf defineIndex} (\$\_\-index)
\item 
{\bf scheme} (\$\_\-drops=false)
\item 
{\bf alterScheme} (\$\_\-field)
\item 
{\bf tableDescription} (\$tablename, \&\$data)
\item 
{\bf reset} ()
\item 
{\bf getLastWarning} ()
\item 
{\bf getStatus} ()
\item 
{\bf getSeverity} (\$status=null)
\item 
{\bf succeeded} (\$\_\-ok={\bf OWL\_\-SUCCESS}, \&\$\_\-object=null)
\item 
{\bf signal} (\$level={\bf OWL\_\-INFO}, \&\$text=false)
\item 
{\bf traceback} (\&\$text=false, \$depth=0)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static {\bf getInstance} ()
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf init} ()
\item 
{\bf setCallback} (\$\_\-dispatcher)
\item 
{\bf setCallbackArgument} (array \$\_\-arg)
\item 
{\bf getCallback} ()
\item 
{\bf saveStatus} ()
\item 
{\bf restoreStatus} ()
\item 
{\bf check} (\&\$object, \$level={\bf OWL\_\-WARNING})
\item 
{\bf setStatus} (\$status, \$params=array())
\item 
{\bf setHighSeverity} (\&\$object=null)
\item 
{\bf stackMessage} (\$level={\bf OWL\_\-WARNING})
\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf \$severity}
\end{DoxyCompactItemize}
\subsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf \_\-\_\-construct} ()
\item 
{\bf validateScheme} ()
\item 
{\bf compare} ()
\item 
{\bf createTable} ()
\item 
{\bf alterTable} (\$\_\-diffs, \$\_\-drops)
\item 
{\bf \_\-define\_\-field} (\$\_\-desc)
\item 
{\bf getTableColumns} (\$\_\-tablename)
\item 
{\bf getTableIndexes} (\$\_\-tablename)
\end{DoxyCompactItemize}
\subsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
{\bf \$id}
\item 
{\bf \$db}
\item 
{\bf \$scheme}
\item 
{\bf \$table} = ''
\item 
{\bf \$inuse} = false
\end{DoxyCompactItemize}
\subsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static {\bf \$instance}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Scheme handler. 

Handler for all database schemes. This singleton class handles all updates to db tables \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
Oct 7, 2010 -\/-\/ O van Eijk -\/-\/ initial version for \doxyref{OWL}{p.}{classOWL} 
\end{DoxyVersion}
\begin{DoxyNote}{Note}
A port of this class has been created for VirtueMart 
\end{DoxyNote}
\begin{Desc}
\item[{\bf Todo}]This handler currently doesn't use the \doxyref{DbDriver}{p.}{interfaceDbDriver} driver class \end{Desc}


\subsection{Constructor \& Destructor Documentation}
\index{SchemeHandler@{SchemeHandler}!\_\-\_\-construct@{\_\-\_\-construct}}
\index{\_\-\_\-construct@{\_\-\_\-construct}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\_\-\_\-construct}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\_\-\_\-construct (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_ae528fde31fe73647c614ef6f957c4caf}
Class constructor \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References getInstance(), \_\-OWL::init(), and \_\-OWL::setStatus().

\index{SchemeHandler@{SchemeHandler}!\_\-\_\-destruct@{\_\-\_\-destruct}}
\index{\_\-\_\-destruct@{\_\-\_\-destruct}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\_\-\_\-destruct}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\_\-\_\-destruct (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classSchemeHandler_a3d786efe6ef92858de21438b59774226}
Class destructor \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


Reimplemented from {\bf \_\-OWL} \doxyref{}{p.}{class__OWL_a44fd2222476a3109286cc82d92b6bbcc}.



\subsection{Member Function Documentation}
\index{SchemeHandler@{SchemeHandler}!\_\-\_\-clone@{\_\-\_\-clone}}
\index{\_\-\_\-clone@{\_\-\_\-clone}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\_\-\_\-clone}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\_\-\_\-clone (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classSchemeHandler_af0a48894ea6bb36f3149ccd40bf37681}
Implementation of the \doxyref{\_\-\_\-clone()}{p.}{classSchemeHandler_af0a48894ea6bb36f3149ccd40bf37681} function to prevent cloning of this singleton; it triggers a fatal (user)error \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}
\index{SchemeHandler@{SchemeHandler}!\_\-define\_\-field@{\_\-define\_\-field}}
\index{\_\-define\_\-field@{\_\-define\_\-field}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\_\-define\_\-field}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\_\-define\_\-field (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-desc}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_a223d509509598fbc99741e910bda8cac}
Create the SQL code for a field definition 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-desc} & Indexed array with the field properties from scheme definition \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
string SQL code 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


Referenced by alterTable(), and createTable().

\index{SchemeHandler@{SchemeHandler}!alterScheme@{alterScheme}}
\index{alterScheme@{alterScheme}!SchemeHandler@{SchemeHandler}}
\subsubsection[{alterScheme}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::alterScheme (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-field}
\end{DoxyParamCaption}
)}\label{classSchemeHandler_a4072b1c3c04e4915cbd0e8926a8efb7a}
Modify 1 or more fields in an existing scheme definition 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-field} & Array holding 1 or more field descriptions \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\doxyref{defineScheme()}{p.}{classSchemeHandler_acadaf57e5f374f300501153056f227c5} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
Boolean; false if the table description contains errors 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References scheme(), \_\-OWL::setStatus(), and validateScheme().

\index{SchemeHandler@{SchemeHandler}!alterTable@{alterTable}}
\index{alterTable@{alterTable}!SchemeHandler@{SchemeHandler}}
\subsubsection[{alterTable}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::alterTable (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-diffs, }
\item[{\$}]{\_\-drops}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_a498dc3fc0d51998422623ca64c84c52b}
Make changes to the table 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-diffs} & Changes to make \\
\hline
\mbox{\tt in}  & {\em \$\_\-drops} & True if existing fields should be dropped \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-define\_\-field().



Referenced by scheme().

\index{SchemeHandler@{SchemeHandler}!check@{check}}
\index{check@{check}!SchemeHandler@{SchemeHandler}}
\subsubsection[{check}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::check (
\begin{DoxyParamCaption}
\item[{\&\$}]{object, }
\item[{\$}]{level = {\ttfamily {\bf OWL\_\-WARNING}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_ae2e3c56e5f3c4ce4156c6b1bb1c50f63}
This is a helper function for lazy developers. Some checks have to be made quite often, this is a kinda macro to handle that. It compares the own severity level with that of a given object. If the highest level is above a given max, a traceback and reset are performed.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$object} & Pointer to an object to check against \\
\hline
\mbox{\tt in}  & {\em \$level} & The maximum severity level \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True if the severity level was correct (below the max), otherwise false 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-OWL::reset(), \_\-OWL::setHighSeverity(), and \_\-OWL::traceback().



Referenced by SessionHandler::write().

\index{SchemeHandler@{SchemeHandler}!compare@{compare}}
\index{compare@{compare}!SchemeHandler@{SchemeHandler}}
\subsubsection[{compare}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::compare (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_ae2a981feae465ef5e46782b4a18da1ad}
Compare the scheme with an existing database table \begin{DoxyReturn}{Returns}
mixed True if there are no differences, False if the table does not exist, or an array with differences 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-OWL::getStatus(), scheme(), and tableDescription().



Referenced by scheme().

\index{SchemeHandler@{SchemeHandler}!createScheme@{createScheme}}
\index{createScheme@{createScheme}!SchemeHandler@{SchemeHandler}}
\subsubsection[{createScheme}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::createScheme (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-tblname}
\end{DoxyParamCaption}
)}\label{classSchemeHandler_a49bc2a5dd43188f83824aafd9fbff9eb}
Set a new tablename 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-tblname} & Name of the table to create, check or modify \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References reset(), and \_\-OWL::setStatus().

\index{SchemeHandler@{SchemeHandler}!createTable@{createTable}}
\index{createTable@{createTable}!SchemeHandler@{SchemeHandler}}
\subsubsection[{createTable}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::createTable (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_a7c5939939cb2ba71ed5a32bc987f0c71}
Create the defined table \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-define\_\-field(), and scheme().



Referenced by scheme().

\index{SchemeHandler@{SchemeHandler}!defineIndex@{defineIndex}}
\index{defineIndex@{defineIndex}!SchemeHandler@{SchemeHandler}}
\subsubsection[{defineIndex}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::defineIndex (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-index}
\end{DoxyParamCaption}
)}\label{classSchemeHandler_abc00b9ccfdf0681a3e5d333ad11db0e1}
Define the indexes for a table 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-index} & Array holding the index description. This is a 2 dimensional array where the first level holds the indexname. The second array defines the attributes for each index:
\begin{DoxyItemize}
\item unique : Boolean; True for unique keys
\item primary : Boolean; True for the primary key
\item columns : Array; List with columnnames that will be indexed
\item type : String (optional); Index type, currenty only supports 'FULLTEXT' 
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References scheme(), \_\-OWL::setStatus(), and validateScheme().

\index{SchemeHandler@{SchemeHandler}!defineScheme@{defineScheme}}
\index{defineScheme@{defineScheme}!SchemeHandler@{SchemeHandler}}
\subsubsection[{defineScheme}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::defineScheme (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-scheme}
\end{DoxyParamCaption}
)}\label{classSchemeHandler_acadaf57e5f374f300501153056f227c5}
Define the layout for a table 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-scheme} & Array holding the table description. This is a 2 dimensional array where the first level holds the fieldnames. The second array defines the attributes for each field:
\begin{DoxyItemize}
\item type : String; the field-\/type (INT$|$TINYINT$|$VARCHAR$|$MEDIUMTEXT$|$TEXT$|$LONGTEXT$|$BLOB$|$LONGBLOB$|$ENUM$|$SET)
\item length : Integer; indicating the length for fieldtypes that use that (like INT and VARCHAR)
\item null : Boolean; when true the value can be NULL
\item auto-\/inc : Boolean; True for auto-\/increment values (will be set as primary key)
\item default : Mixed; default value
\item options : Array; for SET and ENUM types. the list of possible values
\item comment : String; field comment 
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References scheme(), \_\-OWL::setStatus(), and validateScheme().

\index{SchemeHandler@{SchemeHandler}!getCallback@{getCallback}}
\index{getCallback@{getCallback}!SchemeHandler@{SchemeHandler}}
\subsubsection[{getCallback}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::getCallback (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_acb46ff88f43ca66f1268d3f5199c3f8d}
Retrieve a previously set (callback) dispatcher. The (callback) dispatcher is cleared immediatly. \begin{DoxyReturn}{Returns}
The dispatcher, of null on failure. 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


Reimplemented in {\bf Dispatcher} \doxyref{}{p.}{classDispatcher_a31c4bd4e4eaee7ef90b1ea364a901447}.



References OWL::factory().

\index{SchemeHandler@{SchemeHandler}!getInstance@{getInstance}}
\index{getInstance@{getInstance}!SchemeHandler@{SchemeHandler}}
\subsubsection[{getInstance}]{\setlength{\rightskip}{0pt plus 5cm}static SchemeHandler::getInstance (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [static]}}\label{classSchemeHandler_aedfe445dbf679209066213b64d883c7d}
Return a reference to my implementation. If necessary, create that implementation first. \begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \$instance.



Referenced by \_\-\_\-construct().

\index{SchemeHandler@{SchemeHandler}!getLastWarning@{getLastWarning}}
\index{getLastWarning@{getLastWarning}!SchemeHandler@{SchemeHandler}}
\subsubsection[{getLastWarning}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::getLastWarning (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inherited]}}\label{class__OWL_a1888f52fc2d0ec29e146925ccad70a6b}
Get the last warning or error message. \begin{DoxyReturn}{Returns}
null if there was no error (severity below OWL\_\-WARNING), otherwise the error text. 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-OWL::signal().

\index{SchemeHandler@{SchemeHandler}!getSeverity@{getSeverity}}
\index{getSeverity@{getSeverity}!SchemeHandler@{SchemeHandler}}
\subsubsection[{getSeverity}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::getSeverity (
\begin{DoxyParamCaption}
\item[{\$}]{status = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inherited]}}\label{class__OWL_a2374613f9bb7eccf49a5dbc9a9ef4751}
Get the current object severity level. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$status} & An optional parameter to check an other status code i.s.o the object's current status. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Status severity level 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-OWL::\$status.



Referenced by LogHandler::composeMessage(), LogHandler::log(), and DataHandler::setKey().

\index{SchemeHandler@{SchemeHandler}!getStatus@{getStatus}}
\index{getStatus@{getStatus}!SchemeHandler@{SchemeHandler}}
\subsubsection[{getStatus}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::getStatus (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [final, inherited]}}\label{class__OWL_ac1f1643ff5b5db7c326c30477603358d}
Get the current object status. \begin{DoxyReturn}{Returns}
Object's status code 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


Referenced by compare().

\index{SchemeHandler@{SchemeHandler}!getTableColumns@{getTableColumns}}
\index{getTableColumns@{getTableColumns}!SchemeHandler@{SchemeHandler}}
\subsubsection[{getTableColumns}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::getTableColumns (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-tablename}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_abbf0ce7a23293498c32227e2554ce849}
Get the columns for a given table 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-tablename} & The tablename \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Indexed array holding all fields =$>$ datatypes, or null on errors 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-OWL::setStatus().



Referenced by tableDescription().

\index{SchemeHandler@{SchemeHandler}!getTableIndexes@{getTableIndexes}}
\index{getTableIndexes@{getTableIndexes}!SchemeHandler@{SchemeHandler}}
\subsubsection[{getTableIndexes}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::getTableIndexes (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-tablename}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_af40c242f4bddee235dbce50a7535b094}
Get the indexes for a given table 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-tablename} & The tablename \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Indexed array holding all fields =$>$ datatypes, or null on errors 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-OWL::setStatus().



Referenced by tableDescription().

\index{SchemeHandler@{SchemeHandler}!init@{init}}
\index{init@{init}!SchemeHandler@{SchemeHandler}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_ae0ef3ded56e8a6b34b6461e5a721cd3e}
This function should be called by all constuctors. It initializes the general characteristics. Status is 'warning' by default, it's up to the contructor to set a proper status; if it's still 'warning', this $\ast$might$\ast$ indicate something went wrong. \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References OWL::factory(), and \_\-OWL::setStatus().



Referenced by FormFieldPlugin::\_\-\_\-construct(), Document::\_\-\_\-construct(), ContainerPlugin::\_\-\_\-construct(), Container::\_\-\_\-construct(), SocketHandler::\_\-\_\-construct(), SessionHandler::\_\-\_\-construct(), \_\-\_\-construct(), LogHandler::\_\-\_\-construct(), ImageHandler::\_\-\_\-construct(), FormHandler::\_\-\_\-construct(), FileHandler::\_\-\_\-construct(), DbHandler::\_\-\_\-construct(), HDataHandler::\_\-\_\-construct(), DataHandler::\_\-\_\-construct(), OWL::\_\-\_\-construct(), Mail::\_\-\_\-construct(), Group::\_\-\_\-construct(), Form::\_\-\_\-construct(), Dispatcher::\_\-\_\-construct(), and User::construct().

\index{SchemeHandler@{SchemeHandler}!reset@{reset}}
\index{reset@{reset}!SchemeHandler@{SchemeHandler}}
\subsubsection[{reset}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::reset (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{classSchemeHandler_aa25feb4a70d67b3d571904be4b2f50bc}
Reset the internal data structure \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


Reimplemented from {\bf \_\-OWL} \doxyref{}{p.}{class__OWL_a2f2a042bcf31965194c03033df0edc9b}.



References scheme().



Referenced by createScheme().

\index{SchemeHandler@{SchemeHandler}!restoreStatus@{restoreStatus}}
\index{restoreStatus@{restoreStatus}!SchemeHandler@{SchemeHandler}}
\subsubsection[{restoreStatus}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::restoreStatus (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_a93de01a9bbbc3f228e1a62a0740e90f0}
Restore the previously saved status object and destroy the copy \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-OWL::setStatus().



Referenced by User::logout().

\index{SchemeHandler@{SchemeHandler}!saveStatus@{saveStatus}}
\index{saveStatus@{saveStatus}!SchemeHandler@{SchemeHandler}}
\subsubsection[{saveStatus}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::saveStatus (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_add923dc756471318edca8883db3f4420}
Create a copy of the status object \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


Referenced by User::logout().

\index{SchemeHandler@{SchemeHandler}!scheme@{scheme}}
\index{scheme@{scheme}!SchemeHandler@{SchemeHandler}}
\subsubsection[{scheme}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::scheme (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-drops = {\ttfamily false}}
\end{DoxyParamCaption}
)}\label{classSchemeHandler_a1e843dc411d175818c7b2ab5374f021e}
If the table does not exist, or differs from the defined scheme, create of modify the table 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-drops} & True if existing fields should be dropped; default false. If existing fields should be converted to new fields, call with DbScheme::scheme(false) first, then do the conversions, next call DbScheme::scheme(true). \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References alterTable(), compare(), createTable(), and \_\-OWL::setStatus().



Referenced by alterScheme(), compare(), createTable(), defineIndex(), defineScheme(), reset(), and validateScheme().

\index{SchemeHandler@{SchemeHandler}!setCallback@{setCallback}}
\index{setCallback@{setCallback}!SchemeHandler@{SchemeHandler}}
\subsubsection[{setCallback}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::setCallback (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-dispatcher}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_a5f84d43cd4dc7810649f1e2ebecad360}
Set a dispatcher for later callback 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-dispatcher} & Dispatched, \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See also}
\doxyref{Dispatcher::composeDispatcher()}{p.}{classDispatcher_a8a974bbbb30be7cda74f9929972fd2f6} 
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
True on success, false on failure 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References OWL::factory().

\index{SchemeHandler@{SchemeHandler}!setCallbackArgument@{setCallbackArgument}}
\index{setCallbackArgument@{setCallbackArgument}!SchemeHandler@{SchemeHandler}}
\subsubsection[{setCallbackArgument}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::setCallbackArgument (
\begin{DoxyParamCaption}
\item[{array \$}]{\_\-arg}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_a4e9ebfbd3c0d76539bed4e44de9962c3}
Add an argument to a previously registered callback dispatcher 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-arg} & Argument, must be an array type. When non-\/ arrays should be passed as arguments, the must be set when the callback is registered already \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
True on success, false on failure 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References OWL::factory().



Referenced by User::register().

\index{SchemeHandler@{SchemeHandler}!setHighSeverity@{setHighSeverity}}
\index{setHighSeverity@{setHighSeverity}!SchemeHandler@{SchemeHandler}}
\subsubsection[{setHighSeverity}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::setHighSeverity (
\begin{DoxyParamCaption}
\item[{\&\$}]{object = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_a97173dbe452428d3851406413264734d}
Compare the severity level of the current object with a given one and set my statuspointer to the object with the highest level. \begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


Referenced by \_\-OWL::check(), DataHandler::db(), DataHandler::prepare(), and SessionHandler::read().

\index{SchemeHandler@{SchemeHandler}!setStatus@{setStatus}}
\index{setStatus@{setStatus}!SchemeHandler@{SchemeHandler}}
\subsubsection[{setStatus}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::setStatus (
\begin{DoxyParamCaption}
\item[{\$}]{status, }
\item[{\$}]{params = {\ttfamily array~()}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [final, protected, inherited]}}\label{class__OWL_a80e2fe01c3663dbb0ab685eebe33fd1e}
Set the current object status to the specified value. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$status} & \doxyref{OWL}{p.}{classOWL} status code \\
\hline
\mbox{\tt in}  & {\em \$params} & \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \$GLOBALS, \_\-OWL::\$status, ConfigHandler::get(), Register::getCode(), \_\-OWL::reset(), and \_\-OWL::signal().



Referenced by DbHandler::\_\-\_\-clone(), Container::\_\-\_\-construct(), SocketHandler::\_\-\_\-construct(), \_\-\_\-construct(), ImageHandler::\_\-\_\-construct(), FormHandler::\_\-\_\-construct(), FileHandler::\_\-\_\-construct(), DbHandler::\_\-\_\-construct(), DataHandler::\_\-\_\-construct(), Session::\_\-\_\-construct(), Mail::\_\-\_\-construct(), BaseElement::\_\-getContent(), HDataHandler::\_\-getNewLeft(), Mail::addBcc(), Mail::addCc(), Container::addContainer(), Form::addField(), FormFieldRadioPlugin::addOption(), HDataHandler::addParent(), Mail::addTo(), BaseElement::addToContent(), DbHandler::alt(), alterScheme(), FileHandler::close(), DbHandler::commitTransaction(), Dispatcher::composeDispatcher(), User::confirm(), SocketHandler::connect(), DbHandler::connect(), DbHandler::create(), createScheme(), DbHandler::dbread(), defineIndex(), defineScheme(), SocketHandler::disconnect(), Dispatcher::dispatch(), HDataHandler::enableCrossLink(), FormHandler::get(), DataHandler::get(), HDataHandler::getDirectChildren(), HDataHandler::getFullOffspring(), Group::getGroupByName(), getTableColumns(), getTableIndexes(), \_\-OWL::init(), Document::loadScript(), Document::loadStyle(), DbHandler::lockTable(), User::login(), HDataHandler::moveNode(), FileHandler::open(), DbHandler::open(), LogHandler::openLogfile(), DataHandler::prepare(), DbHandler::prepareDelete(), DbHandler::prepareField(), DbHandler::prepareInsert(), DbHandler::prepareRead(), DbHandler::prepareUpdate(), SocketHandler::read(), DbHandler::read(), FileHandler::readLine(), HDataHandler::readQuery(), User::readUserdata(), User::register(), Dispatcher::registerArgument(), Dispatcher::registerCallback(), DbHandler::resetTable(), \_\-OWL::restoreStatus(), DbHandler::rollbackTransaction(), scheme(), Mail::send(), FormHandler::set(), BaseElement::setAttributes(), BaseElement::setContent(), Form::setEncoding(), Document::setFavicon(), Form::setFieldAttributes(), Mail::setFrom(), DataHandler::setJoin(), DataHandler::setKey(), FormFieldTextPlugin::setMaxsize(), Document::setMeta(), Form::setMethod(), FormFieldRadioPlugin::setSelected(), Mail::setSender(), FormFieldTextPlugin::setSize(), FormFieldSelectPlugin::setSize(), FormFieldSelectPlugin::setValue(), Form::showField(), DbHandler::startTransaction(), tableDescription(), DbHandler::unlockTable(), validateScheme(), SocketHandler::write(), DbHandler::write(), and HDataHandler::writeQuery().

\index{SchemeHandler@{SchemeHandler}!signal@{signal}}
\index{signal@{signal}!SchemeHandler@{SchemeHandler}}
\subsubsection[{signal}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::signal (
\begin{DoxyParamCaption}
\item[{\$}]{level = {\ttfamily {\bf OWL\_\-INFO}}, }
\item[{\&\$}]{text = {\ttfamily false}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inherited]}}\label{class__OWL_a51ba4a16409acf2a2f61f286939091a5}
Display the message for the current object status 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$level} & An optional severity level; message will only be displayed when it is at least of this level. \\
\hline
\mbox{\tt out}  & {\em \$text} & If this parameter is given, the message text is returned in this string instead of echood. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The severity level for this object 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References ConfigHandler::get(), OutputHandler::outputLine(), and OutputHandler::outputRaw().



Referenced by \_\-OWL::getLastWarning(), \_\-OWL::setStatus(), \_\-OWL::stackMessage(), and \_\-OWL::traceback().

\index{SchemeHandler@{SchemeHandler}!stackMessage@{stackMessage}}
\index{stackMessage@{stackMessage}!SchemeHandler@{SchemeHandler}}
\subsubsection[{stackMessage}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::stackMessage (
\begin{DoxyParamCaption}
\item[{\$}]{level = {\ttfamily {\bf OWL\_\-WARNING}}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_acbb85f4949ca4bbd8bb2408362632cbc}
Add the message for the latests status change to the document \begin{DoxySeeAlso}{See also}
\doxyref{Document::addMessage()}{p.}{classDocument_aee4ecb0f14972dafd3114659b57048b3} 
\end{DoxySeeAlso}

\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$level} & Minimum severity level \\
\hline
\end{DoxyParams}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \$\_\-doc, \_\-OWL::\$severity, OWL::factory(), and \_\-OWL::signal().

\index{SchemeHandler@{SchemeHandler}!succeeded@{succeeded}}
\index{succeeded@{succeeded}!SchemeHandler@{SchemeHandler}}
\subsubsection[{succeeded}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::succeeded (
\begin{DoxyParamCaption}
\item[{\$}]{\_\-ok = {\ttfamily {\bf OWL\_\-SUCCESS}}, }
\item[{\&\$}]{\_\-object = {\ttfamily null}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inherited]}}\label{class__OWL_a53ab4d3bbb2c6a56966c339ca4b4c805}
Check if the object currenlty has a success state 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$\_\-ok} & The highest severity that's considered successfull, default OWL\_\-SUCCESS \\
\hline
\mbox{\tt in}  & {\em \$\_\-object} & REference to the object to check, defaults to the current object \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Boolean true when successfull 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


Referenced by User::construct(), Dispatcher::registerArgument(), and Dispatcher::registerCallback().

\index{SchemeHandler@{SchemeHandler}!tableDescription@{tableDescription}}
\index{tableDescription@{tableDescription}!SchemeHandler@{SchemeHandler}}
\subsubsection[{tableDescription}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::tableDescription (
\begin{DoxyParamCaption}
\item[{\$}]{tablename, }
\item[{\&\$}]{data}
\end{DoxyParamCaption}
)}\label{classSchemeHandler_a3ec1c9bb94164aa23faa06dea8fa187e}
Get a description of a database table 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em \$tablename} & The tablename \\
\hline
\mbox{\tt out}  & {\em \$data} & Indexed array holding all fields =$>$ datatypes \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity level 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References getTableColumns(), getTableIndexes(), and \_\-OWL::setStatus().



Referenced by compare().

\index{SchemeHandler@{SchemeHandler}!traceback@{traceback}}
\index{traceback@{traceback}!SchemeHandler@{SchemeHandler}}
\subsubsection[{traceback}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::traceback (
\begin{DoxyParamCaption}
\item[{\&\$}]{text = {\ttfamily false}, }
\item[{\$}]{depth = {\ttfamily 0}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inherited]}}\label{class__OWL_aa29547995d6741b7d2b90c1d4ea99a13}
If somehwere in the nested calls an error occured, we can traceback the original failing object with this function and signal the message. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt out}  & {\em \$text} & Optional variable in which the message text can be stored. If not given, the text will be written to standard output \\
\hline
\mbox{\tt in}  & {\em \$depth} & This paramater should be initially empty. It calculates the depth in recursive calls. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Severity code of the failing object 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References \_\-OWL::signal().



Referenced by \_\-OWL::check(), User::login(), and SessionHandler::read().

\index{SchemeHandler@{SchemeHandler}!validateScheme@{validateScheme}}
\index{validateScheme@{validateScheme}!SchemeHandler@{SchemeHandler}}
\subsubsection[{validateScheme}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::validateScheme (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_addc471d7e188ad7131f69fd7adbd268b}
Validate the defined scheme. Some values will be modified to make sure the SQL statements can be prepared and \doxyref{compare()}{p.}{classSchemeHandler_ae2a981feae465ef5e46782b4a18da1ad} won't find differences on case diffs \begin{DoxyReturn}{Returns}
boolean False if there is an error in the scheme definition, True if no errors were found 
\end{DoxyReturn}
\begin{DoxyAuthor}{Author}
Oscar van Eijk, Oveas Functionality Provider 
\end{DoxyAuthor}


References scheme(), and \_\-OWL::setStatus().



Referenced by alterScheme(), defineIndex(), and defineScheme().



\subsection{Member Data Documentation}
\index{SchemeHandler@{SchemeHandler}!\$db@{\$db}}
\index{\$db@{\$db}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\$db}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\$db\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_abf3bf26e35b759ccd49f358dedc2dfd1}
integer -\/ Reference to the database class \index{SchemeHandler@{SchemeHandler}!\$id@{\$id}}
\index{\$id@{\$id}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\$id}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\$id\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_af297e966eae06ff1e38a143f93b4aeb9}
integer -\/ Scheme Handle ID \index{SchemeHandler@{SchemeHandler}!\$instance@{\$instance}}
\index{\$instance@{\$instance}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\$instance}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\$instance\hspace{0.3cm}{\ttfamily  [static, private]}}\label{classSchemeHandler_a6f45c52527230b3f3b60d75a9b55e3c1}
integer -\/ self reference 

Referenced by getInstance().

\index{SchemeHandler@{SchemeHandler}!\$inuse@{\$inuse}}
\index{\$inuse@{\$inuse}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\$inuse}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\$inuse = false\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_a90e5b04603f86c04b1691b2ddf730104}
boolean -\/ True when a scheme is filled with data and not yet used \index{SchemeHandler@{SchemeHandler}!\$scheme@{\$scheme}}
\index{\$scheme@{\$scheme}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\$scheme}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\$scheme\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_aeb6dfa54ebd11b0d6acc51b8244d598c}
Array -\/ table description \index{SchemeHandler@{SchemeHandler}!\$severity@{\$severity}}
\index{\$severity@{\$severity}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\$severity}]{\setlength{\rightskip}{0pt plus 5cm}\_\-OWL::\$severity\hspace{0.3cm}{\ttfamily  [protected, inherited]}}\label{class__OWL_ad26b40a9dbbacb33e299b17826f8327c}
Severity level of the current object status 

Referenced by \_\-OWL::stackMessage().

\index{SchemeHandler@{SchemeHandler}!\$table@{\$table}}
\index{\$table@{\$table}!SchemeHandler@{SchemeHandler}}
\subsubsection[{\$table}]{\setlength{\rightskip}{0pt plus 5cm}SchemeHandler::\$table = ''\hspace{0.3cm}{\ttfamily  [private]}}\label{classSchemeHandler_aea92c0f74dbb2e1efd07bdb472660e20}
Array -\/ table name 

The documentation for this class was generated from the following file:\begin{DoxyCompactItemize}
\item 
/home/oscar/projects/owl-\/php/src/kernel/so/{\bf class.schemehandler.php}\end{DoxyCompactItemize}
